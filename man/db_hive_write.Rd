% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db_write.R
\name{db_hive_write}
\alias{db_hive_write}
\title{Publish / Append / Ignore / Replace Partitions in the Hive Lake}
\usage{
db_hive_write(
  data,
  section,
  dataset,
  partition_by = NULL,
  mode = c("overwrite", "append", "ignore", "replace_partitions"),
  compression = NULL,
  filename_pattern = "data_{uuid}"
)
}
\arguments{
\item{data}{A data.frame / tibble}

\item{section}{Your section name}

\item{dataset}{The name of the dataset}

\item{partition_by}{Character vector of column names to partition by (e.g. c("year","month"))}

\item{mode}{One of:
\itemize{
\item "overwrite": replace target files
\item "append": add new files (requires unique filenames)
\item "ignore": write only if target path does not exist (best-effort; still race-prone)
\item "replace_partitions": delete only affected partition folders, then append fresh files (requires partition_by)
}}

\item{compression}{Parquet compression codec (NULL means DuckDB default).
Options: "zstd", "snappy", "gzip", "brotli", "lz4", "lz4_raw", "uncompressed"}

\item{filename_pattern}{Used in append-like modes (default \code{"data_\{uuid\}"})}
}
\value{
Invisibly returns the output path
}
\description{
Publish / Append / Ignore / Replace Partitions in the Hive Lake
}
\examples{
\dontrun{
# Basic overwrite
db_hive_write(my_data, "Trade", "Imports")

# Partitioned write
db_hive_write(my_data, "Trade", "Imports", partition_by = c("year", "month"))

# Append mode
db_hive_write(my_data, "Trade", "Imports", mode = "append")

# Replace only touched partitions
db_hive_write(my_data, "Trade", "Imports", 
              partition_by = c("year", "month"), 
              mode = "replace_partitions")
}
}
